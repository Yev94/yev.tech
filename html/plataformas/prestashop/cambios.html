<h1>Cambios de Prestashop</h1>
<section>
    <h2>Cambiar URL admin</h2>
    <img src="./img/22-07-03-18-28-41.png" alt="">
    <p>Simplemente cambiando el nombre del archivo de administraci√≥n</p>
    <p>Ej: admin485ljlini -> yev-admin</p>
    <p>P.S.: Presta no deja cambiar a admin solamente</p>
</section>
<section>
    <h2>Cambiar Usuario desde BBDD</h2>
    <p>Primero ir ./app/config/parameters.php</p>
    <p>Copiar el valor de cookie_key</p>
    <img src="./img/22-07-03-19-12-24.png" alt="">
    <p>Al cambiar la contrase√±a hay que poner la (cookie_key + Contrase√±a). Todo junto sin espacios</p>
    <p>Ej: <span
            style="color:rgb(0, 171, 251) !important">vbpnBuIYuPFreZbyB6R40AfANATbSpv3CB34QrBQZohRtzpVD1JfxQAMsw6Egmwz</span><span
            style="color:rgb(209, 23, 23) !important">Yev694..</span></p>
    <h3>Admin</h3>
    <p>En la tabla ps_employee</p>
    <img src="./img/22-07-03-18-39-23.png" alt="">
    <h3>Otros Usuarios</h3>
    <p>En la tabla ps_customers</p>
    <img src="./img/22-07-03-18-35-44.png" alt="">
</section>
<section>
    <h2>Cambiar Nombre dominio desde BBDD</h2>
    <p>En la tabla ps_shop_url</p>
    <img src="./img/22-07-03-18-25-17.png" alt="">
</section>
<section>
    <h2>A√±adir estilos CSS y JS a un theme</h2>
    <p>Vamos a: ./themes/&lt;nomTheme&gt;/assets/css</p>
    <p>Creamos un archivo CSS llamado por Ej: custom.css</p>
    <p>Vamos a : ./themes/&lt;nomTheme&gt;/config/theme.yml</p>
    <img src="./img/22-07-03-20-20-21.png" alt="">
    <p>Descomentamos la parte que nos interese del CSS y/o del JS</p>
</section>
<section>
    <h2>Crear un child Theme</h2>
    <p>Todo el contenido se puede copiar del tema padre seg√∫n las necesidades</p>
    <p>Carpetas</p>
    <ul>
        <li>classicChildTheme</li>
        <ul>
            <li>preview.png</li>
            <li>config</li>
            <ul>
                <li>.htaccess</li>
                <li>theme.yml</li>
            </ul>
            <li>assets</li>
            <ul>
                <li>cache</li>
                <li>css</li>
                <ul>
                    <li>custom.css</li>
                </ul>
            </ul>
        </ul>
    </ul>
    <p>En el theme.yml:</p>
    <div class="code">
        <pre>
            <code class="language">
parent: classic
#Asegurarse que sea igual que el nombre de la carpeta del tema hijo
name: classicChildTheme
display_name: The Child Theme
version: 1.0.0
assets:
  use_parent_assets: true
            </code>
        </pre>
    </div>
    <img src="./img/22-07-07-08-56-31.png" alt="">
    <p>A tener en cuenta:</p>
    <ul>
        <li>Los cambios son en theme.yml</li>
        <li>Evitar may√∫sculas en el name y el nombre de la carpeta del tema hijo</li>
        <li>Asegurase que el name y el nombre de la carpeta del tema hijo son iguales</li>
        <li>Descomentar use_parent_assets:true de assets</li>
    </ul>
</section>
<section>
    <h2>Cambio de domino</h2>
    <p>‚ö† Revisar que est√© la versi√≥n 7.2.4 de PHP</p>
    <p>Hay que cambiar el nuevo dominio en el .htaccess</p>
    <p>Dentro del .htaccess tambi√©n hay que escribir:</p>
    <p>#Domain: miNuevoDominio.com</p>
    <p>RewriteRule . - [E=REWRITEBASE:/<i>DirectorioInterno</i>/]</p>
    <p>En la BBDD hay que cambiar de la tabla</p>
    <p>ps_shop_url del siguiente modo:</p>
    <img src="./img/22-07-21-00-08-50.png" alt="">
    <p>ps_configuration la variable PS_SHOP_DOMAIN y PS_SHOP_DOMAIN_SSL</p>
    <img src="./img/22-07-21-00-10-35.png" alt="">
    <p>üß™Activar el modo depuraci√≥n desde: config > defines.inc.php > define('_PS_MODE_DEV_', true);</p>
    <p>Eliminar los archivos de la cach√© principal (excepto el index) y eliminar la cache de var/cache (eliminar todas las carpetas)</p>
</section>
<section>
    <h2>Cambiar conexi√≥n BBDD</h2>
    <p>/app/config/parameters.php</p>
</section>
<section>
    <h2>Cambiar Tema desde la BBDD</h2>
    <h2>En la tabla ps_shop</h2>
</section>
<section>
    <h2>Snippets Review</h2>
    <p>Para crear tu propia review</p>
</section>
<section>
    <h2>Asociar Currency(Moneda) a Idioma</h2>
    <p>Ref para la funci√≥n de la asociaci√≥n del idioma: <a href="https://www.prestashop.com/forums/topic/52019-change-currency-automatically-when-switching-from-one-language-to-another/">change currency automatically when switching from one language to another</a> (El c√≥digo del final)</p>
    <p>Ref para crear la clase y funci√≥n override <a href="https://www.tiendaprest.com/como-hacer-un-override-en-prestashop/">Como hacer un override en Prestashop</a></p>
    <p>En la carpeta override &gt classes &gt creamos el archivo Tools.php</p>
    <div class="code">
        <pre>
            <code class="language-php">
&lt?php
class Tools extends ToolsCore
{
    /**
        * If necessary change cookie language ID and context language.
        *
        * @param Context|null $context
        *
        * @throws PrestaShopDatabaseException
        * @throws PrestaShopException
        */
    public static function switchLanguage(Context $context = null)
    {
        if (null === $context) {
            $context = Context::getContext();
        }

        // On PrestaShop installations Dispatcher::__construct() gets called (and so Tools::switchLanguage())
        // Stop in this case by checking the cookie
        if (!isset($context-&gtcookie)) {
            return;
        }

        if (
            ($iso = Tools::getValue('isolang')) &&
            Validate::isLanguageIsoCode($iso) &&
            ($id_lang = (int) Language::getIdByIso($iso))
        ) {
            $_GET['id_lang'] = $id_lang;
        }

        // Only switch if new ID is different from old ID
        $newLanguageId = (int) Tools::getValue('id_lang');

        if (
            Validate::isUnsignedId($newLanguageId) &&
            $newLanguageId !== 0 &&
            $context-&gtcookie-&gtid_lang !== $newLanguageId
        ) {
            $context-&gtcookie-&gtid_lang = $newLanguageId;
            $language = new Language($newLanguageId);
            if (Validate::isLoadedObject($language) && $language-&gtactive && $language-&gtisAssociatedToShop()) {
                $context-&gtlanguage = $language;
            }
        }

        /** This is the switch we added to match language ID to a desired currency ID */
        switch($newLanguageId) {
            case 1: //if lang_id that's changed to is = 1 than...
                $context-&gtcookie-&gtid_currency = 1;  //change the currency too, the currency that has the id 2
                break;
            case 2: //and so on ....
                $context-&gtcookie-&gtid_currency = 2;
                break;
        }
        
        Tools::setCookieLanguage($context-&gtcookie);

        /** This is the function that actually sets the currency */
        Tools::setCurrency($context-&gtcookie);
    }
}
            </code>
        </pre>
    </div>
</section>